<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Gruta Núcleo Studio v1</title>
  

  <!-- Tailwind (CDN) added for rapid UI prototyping; legacy CSS remains intact -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <div class="dots" aria-hidden="true"></div>

  <div class="app">
    <!-- LEFT: Navigation / Filters -->
    <aside class="panel left" id="leftPanel">
      <div class="panelHeader">
        <div class="brand">
          <div class="logo" aria-hidden="true"></div>
          <div class="brandText">
            <div class="t">Gruta Núcleo Studio — MVP</div>
            <div class="s">Briefing • Orçamento • Metodologias</div>
          </div>
        </div>
        <span class="pill" title="Modo MVP estático (HTML único)">
          <span class="dot"></span> MVP
        </span>
      </div>

      <div class="panelBody">
        <button class="btn primary" id="btnNewProject" style="width:100%">
          + Novo pré-projeto
        </button>

        <div class="sectionTitle" style="margin-top:16px;">
          Visões
          <small class="muted">Equipe</small>
        </div>

        <nav class="nav" aria-label="Navegação">
          <a href="#" class="active" data-view="projects">
            Projetos
            <small id="navCount"></small>
          </a>
          <a href="#" data-view="briefings">
            Briefings
            <small>modelos • respostas</small>
          </a>
          <a href="#" data-view="budgets">
            Orçamentos
            <small>simular • PDF</small>
          </a>
          <a href="#" data-view="methods">
            Metodologias
            <small>banco de horas</small>
          </a>
          <a href="#" data-view="clientPortal">
            Portal do cliente
            <small>área logada</small>
          </a>
        </nav>

        <div class="sectionTitle">
          Indicadores (mock)
          <small class="muted">Dashboard</small>
        </div>

        <div class="kpiGrid" id="kpiGrid"></div>

        <div class="sectionTitle">
          Regras (essência)
          <small class="muted">interno</small>
        </div>
        <div class="card" style="margin-bottom:0">
          <h3>Porte não é perguntado ao cliente</h3>
          <p>Pequeno / Médio / Grande é definido pela equipe no Orçamento e influencia o valor final via multiplicador/tabela interna.</p>
        </div>
      </div>
    </aside>

    <!-- CENTER: Main content -->
    <main class="panel content" id="mainPanel">
      <div class="topbar">
        <div class="left">
          <div style="min-width:0">
            <h1 id="mainTitle">Projetos</h1>
            <div class="sub" id="mainSubtitle">Home administrativa: pipeline completo (pré-projeto → briefing → orçamento → aprovado → projeto ativo).</div>
          </div>
        </div>

        <div class="searchWrap">
          <input class="input" id="search" placeholder="Buscar por nome, cliente, ID…" />
          <button class="btn small" id="btnReset">Limpar</button>
        </div>

        <div style="display:flex; gap:8px; align-items:center;">
          <span class="chip active" data-filter="all">Todos</span>
          <span class="chip" data-filter="pre">Pré-projeto</span>
          <span class="chip" data-filter="brief">Briefing</span>
          <span class="chip" data-filter="budget">Orçamento</span>
          <span class="chip" data-filter="active">Ativo</span>
        </div>
      </div>

      <div class="panelBody" id="mainBody"></div>
    </main>

    <!-- RIGHT: Details / Actions -->
    <aside class="panel right" id="rightPanel">
      <div class="panelHeader">
        <div class="brand">
          <div class="logo" aria-hidden="true" style="width:28px;height:28px;border-radius:11px;"></div>
          <div class="brandText">
            <div class="t" id="detailTitle">Selecione um projeto</div>
            <div class="s" id="detailSub">Detalhes, ações rápidas e visão cliente</div>
          </div>
        </div>
        <button class="btn small ghost" id="btnDeselect" title="Fechar seleção">✕</button>
      </div>

      <div class="tabs" role="tablist" aria-label="Detalhes">
        <div class="tab active" data-tab="overview" role="tab" aria-selected="true">Resumo</div>
        <div class="tab" data-tab="timeline" role="tab" aria-selected="false">Status</div>
        <div class="tab" data-tab="client" role="tab" aria-selected="false">Cliente</div>
      </div>

      <div class="panelBody" id="detailBody">
        <div class="card">
          <h3>Como usar este MVP</h3>
          <p>Crie um pré-projeto, selecione um item na lista e use as ações para simular o fluxo (enviar briefing, receber resposta, enviar orçamento, aprovar).</p>
        </div>
        <div class="card">
          <h3>O que está modelado</h3>
          <p>Pipeline, PDFs (placeholder), banco de metodologias (mock), importação de dados do briefing para orçamento (mock) e portal do cliente (stub).</p>
        </div>
      </div>
    </aside>
  </div>

  <!-- MODAL: New pre-project -->
  <div class="modalBackdrop" id="modalBackdrop" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <div class="modalHead">
        <div class="title" id="modalTitle">Novo pré-projeto</div>
        <button class="btn small ghost" id="btnCloseModal">✕</button>
      </div>
      <div class="modalBody">
        <div>
          <div class="label">Nome provisório do projeto</div>
          <input class="input" id="npName" placeholder="Ex: Identidade Visual — Empresa X" />

          <div class="row">
            <div>
              <div class="label">Cliente / Instituição</div>
              <input class="input" id="npClient" placeholder="Ex: Instituto Araripe" />
            </div>
            <div>
              <div class="label">Responsável interno</div>
              <input class="input" id="npOwner" placeholder="Ex: Equipe Design" />
            </div>
          </div>

          <div class="row">
            <div>
              <div class="label">Modelo de briefing</div>
              <select class="select" id="npBriefModel">
                <option value="Jotform-2604338">Jotform (exemplo 2604338)</option>
                <option value="BrandingBase">Briefing — Branding Base</option>
                <option value="SiteInstitucional">Briefing — Site Institucional</option>
              </select>
            </div>
            <div>
              <div class="label">Canal de contato</div>
              <select class="select" id="npChannel">
                <option>Email</option>
                <option>WhatsApp</option>
                <option>Reunião</option>
              </select>
            </div>
          </div>

          <div class="label">Observações internas</div>
          <textarea class="textarea" id="npNotes" placeholder="Notas rápidas para a equipe (não visível ao cliente)."></textarea>

          <div class="helper">
            Ao criar, o pré-projeto aparece na Home. Depois você pode “gerar link do briefing” para compartilhar com o cliente.
          </div>
        </div>

        <div>
          <div class="card">
            <h3>Fluxo do pré-projeto</h3>
            <p><span class="mono">Pré-projeto</span> é o “container inicial” — cria o briefing, recebe respostas, elabora orçamento e só vira Projeto Ativo após aprovação.</p>
          </div>

          <div class="card">
            <h3>PDFs (MVP)</h3>
            <p>Este MVP não renderiza PDFs reais. Ele gera “arquivos” placeholders na seção de arquivos para demonstrar o fluxo.</p>
          </div>

          <div class="card">
            <h3>Módulos futuros</h3>
            <p>O Projeto Ativo poderá ganhar módulos (ex: Mood Art, Identidade: fontes/paleta, decisões, anexos) — previsto na estrutura.</p>
          </div>
        </div>
      </div>
      <div class="modalFoot">
        <button class="btn" id="btnCancelModal">Cancelar</button>
        <button class="btn primary" id="btnCreateProject">Criar pré-projeto</button>
      </div>
    </div>
  </div>

  

  <!-- PRINT HOST: Budget template (styled to match uploaded PDF; exported via browser Print to PDF) -->
  <div id="printHost">
    <div id="printArea" class="min-h-screen bg-white text-slate-900 p-10">
      <!-- populated by JS -->
    </div>
  </div>

  <script src="./app.js"></script>
</body>
</html>
